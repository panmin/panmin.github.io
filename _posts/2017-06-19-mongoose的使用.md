---
layout:     post                            # 使用的布局（不需要改）
title:      mongoose的使用                   # 标题
subtitle:     #副标题
date:       2017-06-19                      # 时间
author:     PanMin                              # 作者
header-img: img/post-bg-2015.jpg            #这篇文章标题背景图片
catalog: true                               # 是否归档
tags:                                       #标签
    - mongoose,node.js
---

# mongoose的使用

在ES6语法中使用
```
var model1 = await Model.find({})
```
可能会提示`DeprecationWarning: Mongoose: mpromise (mongoose's default promise library) is deprecated, plug in your own promise library instead: http://mongoosejs.com/docs/promises.html`
解决方法：
```
var mongoose = require('mongoose')
mongoose.Promise = Promise;//这句解决问题
```

取时间最大的行（时间倒序后取第一行）：
```
var chapterArr = await Chapter.find({book_id:book._id}).sort({createTime:-1}).limit(1)//返回一个json数组
```